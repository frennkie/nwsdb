{% extends "base.html" %}
{% block title %}Admin_Permissions{% endblock %}
{% block body %}
    <!--Body content-->

        {% import '_helpers.html' as helpers %}


        <div class="row">
          <div class="col-md-1"></div>
          <div class="col-md-10">
            <legend>Permissions &nbsp;<a href="/admin/add_permission" data-toggle="tooltip" title="add permission"><span class="glyphicon glyphicon-plus" style="font-size: 15px"><span></a></legend>
            <table id="permissiontable" class="table table-striped">
                <th class="admin"></th><th class="permission_id">ID</th><th class="delete"></th><th>Name</th><th>Users assigned to this permission</th>

                {% for permission in permissions.items %}
                    <tr>
                        {% if permission.name == "admin" %}
                            <td id="{{ permission.id }}">
                                <a href="#" data-toggle="tooltip" title="Admin"><span class="glyphicon glyphicon-fire text-danger"></span></a>
                            </td>
                        {% else %}
                            <td id="{{ permission.id }}">&nbsp;</td>
                        {% endif %}

                        <td id="{{ permission.id }}">{{ permission.id }}</td>

                        {% if permission.name == "admin" %}
                            <td id="{{ permission.id }}">&nbsp;</td>
                        {% else %}
                            <td id="{{ permission.id }}">
                                <a href="/admin/permission/{{ permission.id }}/delete" data-toggle="tooltip" title="delete"><span class="glyphicon glyphicon-remove text-danger"></span></a>
                            </td>
                        {% endif %}

                        <td id="{{ permission.id }}">{{ permission.name }}</td>
                        <td id="{{ permission.id }}">
                            {% for user in users %}
                                {% if user.has_permission(permission.name) %} {{ user.username }} {% endif %}
                            {% endfor %}
                        </td>
                    </tr>
                {% endfor %}
            </table>

            {{ helpers.paginate(permissions) }}
          </div>
          <div class="col-md-1"></div>
        </div>

{% endblock %}
